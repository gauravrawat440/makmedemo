/*
 Salvattore 1.0.8 by @rnmp and @ppold
 https://github.com/rnmp/salvattore
 matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license  matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */
!function(e,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof exports?module.exports=d():e.salvattore=d()}(this,function(){window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var d=document.createElement("style"),g=document.getElementsByTagName("script")[0],a=null;d.type="text/css";d.id="matchmediajs-test";g.parentNode.insertBefore(d,g);a="getComputedStyle"in window&&window.getComputedStyle(d,null)||d.currentStyle;e={matchMedium:function(e){e=
"@media "+e+"{ #matchmediajs-test { width: 1px; } }";return d.styleSheet?d.styleSheet.cssText=e:d.textContent=e,"1px"===a.width}}}return function(a){return{matches:e.matchMedium(a||"all"),media:a||"all"}}}());(function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,d=e("only all").matches,g=!1,a=0,k=[],n=function(d){clearTimeout(a);a=setTimeout(function(){for(var a=0,b=k.length;b>a;a++){var f=k[a].mql,c=k[a].listeners||[],h=e(f.media).matches;if(h!==
f.matches){f.matches=h;h=0;for(var d=c.length;d>h;h++)c[h].call(window,f)}}},30)};window.matchMedia=function(a){var l=e(a),b=[],f=0;return l.addListener=function(c){d&&(g||(g=!0,window.addEventListener("resize",n,!0)),0===f&&(f=k.push({mql:l,listeners:b})),b.push(c))},l.removeListener=function(c){for(var a=0,f=b.length;f>a;a++)b[a]===c&&b.splice(a,1)},l}})();(function(){for(var e=0,d=["ms","moz","webkit","o"],g=0;g<d.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[d[g]+
"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[g]+"CancelAnimationFrame"]||window[d[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,d){var g=(new Date).getTime(),k=Math.max(0,16-(g-e)),l=window.setTimeout(function(){a(g+k)},k);return e=g+k,l});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();"function"!=typeof window.CustomEvent&&!function(){function e(d,e){e=e||{bubbles:!1,cancelable:!1,
detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(d,e.bubbles,e.cancelable,e.detail),a}e.prototype=window.Event.prototype;window.CustomEvent=e}();return function(e,d,g){var a={},k=[],n=[],p=[],l=function(a,f,c){a.dataset?a.dataset[f]=c:a.setAttribute("data-"+f,c)};return a.obtainGridSettings=function(a){a=e.getComputedStyle(a,":before").getPropertyValue("content").slice(1,-1);var b=a.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),c=1,h=[];return b?(c=b[1],h=b[2],h=h?h.split("."):
["column"]):(b=a.match(/^\s*\.(.+)\s+(\d+)\s*$/),b&&(h=b[1],c=b[2],c&&(c=c.split(".")))),{numberOfColumns:c,columnClasses:h}},a.addColumns=function(b,f){var c=a.obtainGridSettings(b);for(var h=c.numberOfColumns,e=c.columnClasses,q=Array(+h),g=d.createDocumentFragment(),m=h;0!==m--;)c="[data-columns] > *:nth-child("+h+"n-"+m+")",q.push(f.querySelectorAll(c));q.forEach(function(a){var c=d.createElement("div"),b=d.createDocumentFragment();c.className=e.join(" ");Array.prototype.forEach.call(a,function(a){b.appendChild(a)});
c.appendChild(b);g.appendChild(c)});b.appendChild(g);l(b,"columns",h)},a.removeColumns=function(a){var b=d.createRange();b.selectNodeContents(a);a=Array.prototype.filter.call(b.extractContents().childNodes,function(a){return a instanceof e.HTMLElement});var c=a.length,h=Array(a[0].childNodes.length*c);Array.prototype.forEach.call(a,function(a,b){Array.prototype.forEach.call(a.children,function(a,f){h[f*c+b]=a})});var g=d.createElement("div");return l(g,"columns",0),h.filter(function(a){return!!a}).forEach(function(a){g.appendChild(a)}),
g},a.recreateColumns=function(b){e.requestAnimationFrame(function(){a.addColumns(b,a.removeColumns(b));var f=new CustomEvent("columnsChange");b.dispatchEvent(f)})},a.mediaQueryChange=function(b){b.matches&&Array.prototype.forEach.call(k,a.recreateColumns)},a.getCSSRules=function(a){try{var b=a.sheet.cssRules||a.sheet.rules}catch(c){return[]}return b||[]},a.getStylesheets=function(){var a=Array.prototype.slice.call(d.querySelectorAll("style"));return a.forEach(function(b,c){"text/css"!==b.type&&""!==
b.type&&a.splice(c,1)}),Array.prototype.concat.call(a,Array.prototype.slice.call(d.querySelectorAll("link[rel='stylesheet']")))},a.mediaRuleHasColumnsSelector=function(a){var b;try{var c=a.length}catch(h){c=0}for(;c--;)if(b=a[c],b.selectorText&&b.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},a.scanMediaQueries=function(){var b=[];if(e.matchMedia){a.getStylesheets().forEach(function(c){Array.prototype.forEach.call(a.getCSSRules(c),function(c){try{c.media&&c.cssRules&&a.mediaRuleHasColumnsSelector(c.cssRules)&&
b.push(c)}catch(r){}})});var d=n.filter(function(a){return-1===b.indexOf(a)});p.filter(function(a){return-1!==d.indexOf(a.rule)}).forEach(function(c){c.mql.removeListener(a.mediaQueryChange)});p=p.filter(function(a){return-1===d.indexOf(a.rule)});b.filter(function(a){return-1==n.indexOf(a)}).forEach(function(c){var b=e.matchMedia(c.media.mediaText);b.addListener(a.mediaQueryChange);p.push({rule:c,mql:b})});n.length=0;n=b}},a.rescanMediaQueries=function(){a.scanMediaQueries();Array.prototype.forEach.call(k,
a.recreateColumns)},a.nextElementColumnIndex=function(a,d){var c,b=a.children,e=b.length,f=0,g=0;for(c=0;e>c;c++){var m=b[c];m=m.children.length+(d[c].children||d[c].childNodes).length;0===f&&(f=m);f>m&&(g=c,f=m)}return g},a.createFragmentsList=function(a){for(var b=Array(a),c=0;c!==a;)b[c]=d.createDocumentFragment(),c++;return b},a.appendElements=function(b,d){var c=b.children,e=a.createFragmentsList(c.length);Array.prototype.forEach.call(d,function(c){var d=a.nextElementColumnIndex(b,e);e[d].appendChild(c)});
Array.prototype.forEach.call(c,function(a,b){a.appendChild(e[b])})},a.prependElements=function(b,e){var c=b.children,h=c.length,g=a.createFragmentsList(h),f=h-1;e.forEach(function(a){var b=g[f];b.insertBefore(a,b.firstChild);0===f?f=h-1:f--});Array.prototype.forEach.call(c,function(a,b){a.insertBefore(g[b],a.firstChild)});c=d.createDocumentFragment();for(var k=e.length%h;0!==k--;)c.appendChild(b.lastChild);b.insertBefore(c,b.firstChild)},a.registerGrid=function(b){if("none"!==e.getComputedStyle(b).display){var f=
d.createRange();f.selectNodeContents(b);var c=d.createElement("div");c.appendChild(f.extractContents());l(c,"columns",0);a.addColumns(b,c);k.push(b)}},a.init=function(){var b=d.createElement("style");b.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}";d.head.appendChild(b);b=d.querySelectorAll("[data-columns]");Array.prototype.forEach.call(b,a.registerGrid);a.scanMediaQueries()},a.init(),{appendElements:a.appendElements,prependElements:a.prependElements,
registerGrid:a.registerGrid,recreateColumns:a.recreateColumns,rescanMediaQueries:a.rescanMediaQueries,init:a.init,append_elements:a.appendElements,prepend_elements:a.prependElements,register_grid:a.registerGrid,recreate_columns:a.recreateColumns,rescan_media_queries:a.rescanMediaQueries}}(window,window.document)});